(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{703:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/productos",function(){return r(420)}])},7207:function(e,t,r){"use strict";var o=r(5893),n=r(7294),c=r(9008),a=r(1664),s=r.n(a),i=r(5675),l=r.n(i),d=r(1163),u=r(1146),h=r(7581);t.Z=function(e){var t=e.children,r=e.pagina,a=(0,n.useContext)(u.Z),i=a.usuario,f=a.cerrarSesion,x=a.token,p=a.traerTema,m=(0,n.useContext)(h.Z),b=m.limpiarSeleccionado,g=m.limpiarApp,v=(0,n.useState)(!1),w=v[0],j=v[1],k=(0,d.useRouter)(),N=k.route;(0,n.useEffect)((function(){x||k.push("/")}),[x]),(0,n.useEffect)((function(){var e,t=null!==(e=JSON.parse(localStorage.getItem("Modo oscuro")))&&void 0!==e&&e;j(t)}),[]),(0,n.useEffect)((function(){localStorage.setItem("Modo oscuro",JSON.stringify(w)),p(w)}),[w]);return(0,o.jsxs)("div",{className:"min-h-screen",children:[(0,o.jsx)(c.default,{children:(0,o.jsxs)("title",{children:["Inventario - ",r]})}),(0,o.jsxs)("div",{className:"lg:flex md:min-h-screen sm:min-h-screen bg-gray-100 ".concat(w&&"dark"),children:[(0,o.jsxs)("div",{className:"lg:w-1/5 bg-blue-900 px-5 dark:bg-gray-900 flex flex-col justify-between",children:[(0,o.jsxs)("p",{className:"text-white text-4xl font-black text-center",children:["Hola, ",i?(0,o.jsx)("span",{children:i.nombre}):null]}),(0,o.jsxs)("nav",{className:"mt-10 lg:flex-col lg:h-5/6",children:[(0,o.jsx)(s(),{href:"/productos",children:(0,o.jsx)("a",{className:"".concat("/productos"===N?"bg-blue-300 bg-opacity-10 rounded-md  text-white":"text-white"," text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Productos"})}),(0,o.jsx)(s(),{href:"/nuevoproducto",children:(0,o.jsx)("a",{onClick:function(){return b()},className:"".concat("/nuevoproducto"===N?"bg-blue-300 bg-opacity-10 rounded-md  text-white":"text-white"," text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Nuevo Producto"})}),(0,o.jsx)(s(),{href:"/faltantes",children:(0,o.jsx)("a",{onClick:function(){return b()},className:"".concat("/faltantes"===N?"bg-blue-300 bg-opacity-10 rounded-md  text-white":"text-white"," text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Faltantes"})})]}),(0,o.jsxs)("div",{className:"flex flex-row justify-between mb-2",children:[(0,o.jsx)(l(),{src:w?"/light_mode.svg":"/dark_mode.svg",alt:w?"light":"dark",width:50,height:50,priority:!0,className:"cursor-pointer",onClick:function(){j(!w)}}),(0,o.jsx)(l(),{src:w?"/logout_light.svg":"/logout_dark.svg",alt:"Cerrar Sesion",width:50,height:50,priority:!0,className:"cursor-pointer",onClick:function(){return f(),void g()}})]})]}),(0,o.jsx)("div",{className:" lg:w-4/5 p-2 lg:p-10 h-screen dark:bg-gray-800 overflow-x-auto ",children:t})]})]})}},420:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var o=r(5893),n=r(7207),c=r(7294),a=r(4051),s=r.n(a),i=r(1664),l=r.n(i),d=r(7581),u=r(349),h=r(1146),f=r(6455),x=r.n(f);function p(e,t,r,o,n,c,a){try{var s=e[c](a),i=s.value}catch(l){return void r(l)}s.done?t(i):Promise.resolve(i).then(o,n)}var m=function(e){var t=e.producto,r=(0,c.useState)(null),n=r[0],a=r[1],i=t.nombre,f=t.marca,m=t.codigo,b=t.precio_venta_conocidos,g=t.precio_venta_efectivo,v=t.precio_venta_tarjeta,w=t.disponibles,j=t.modelo,k=t._id,N=t.faltante,y=(i+" "+f+" "+j+" $"+Math.round(b)).trim().replace(/\s\s+/g," "),C=(i+" "+f+" "+j+" $"+Math.round(g)).trim().replace(/\s\s+/g," "),E=(i+" "+f+" "+j+" $"+Math.round(v)).trim().replace(/\s\s+/g," "),S=(0,c.useContext)(h.Z).modo,_=(0,c.useContext)(d.Z),P=_.productoActual,O=_.venderProducto,F=(0,c.useContext)(u.Z),M=F.agregarFaltante,D=F.eliminarFaltante;(0,c.useEffect)((function(){n&&M(k),!1===n&&(D(k),I.fire({icon:"error",title:"Quitado de faltantes",background:"".concat(S?"#505050":"white"),color:"".concat(S?"white":"#545454")}))}),[n]);var I=x().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),A=function(){var e,r=(e=s().mark((function e(){var r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().fire({title:"".concat(S?'<h5 style="color:white">Unidades</h5>':'<h5 style="color:#545454">Unidades</h5>'),background:"".concat(S?"rgb(31 41 55)":"white"),html:"".concat(S?'<input id="swal-input" type="number" value="1" style="color: white " class="swal2-input">':'<input id="swal-input" type="number" value="1" style="color: black " class="swal2-input">'),focusConfirm:!0,preConfirm:function(){return[document.getElementById("swal-input").value]},showCloseButton:!0});case 2:if(!(r=e.sent).isConfirmed){e.next=16;break}if(!((o=Number(r.value[0]))<1||!o||isNaN(o))&&Number.isInteger(o)){e.next=9;break}return e.next=8,x().fire({icon:"error",title:"Error",color:"white",background:"".concat(S?"rgb(31 41 55)":"white"),html:"".concat(S?'<p style="color:#a59ff3">Los <b>unidades a vender</b> deben ser un n\xfamero entero mayor a 0.</p>':'<p style="color: #545454">Los <b>unidades a vender</b> deben ser un n\xfamero entero mayor a 0.</p>')});case 8:return e.abrupt("return",A());case 9:if(!(o>w)){e.next=13;break}return e.next=12,x().fire({icon:"error",title:"Error",color:"white",background:"".concat(S?"rgb(31 41 55)":"white"),html:"".concat(S?'<p style="color:#a59ff3"><b>No se pueden vender</b> m\xe1s unidades de las que hay.</p>':'<p style="color: #545454">No se pueden vender</b> m\xe1s unidades de las que hay..</p>')});case 12:return e.abrupt("return",A());case 13:return e.next=15,O(t,o);case 15:I.fire({icon:"success",title:"".concat(o>1?"Se vendieron "+o+" unidades de"+i:"Se vendi\xf3 "+o+" unidad de "+i),background:"".concat(S?"#505050":"white"),width:"25%",color:"".concat(S?"white":"#545454")});case 16:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(o,n){var c=e.apply(t,r);function a(e){p(c,o,n,a,s,"next",e)}function s(e){p(c,o,n,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,o.jsxs)("tr",{className:"border-b dark:border-none hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,o.jsx)("td",{className:"p-3 dark:text-gray-50 text-center font-semibold",children:m}),(0,o.jsx)("td",{className:"dark:text-gray-50 p-3",children:i}),(0,o.jsx)("td",{className:"p-3 dark:text-gray-50 text-center",children:f}),(0,o.jsx)("td",{className:"p-3 dark:text-gray-50 text-center",children:j}),(0,o.jsx)("td",{className:"dark:text-gray-50 text-center uppercase",children:w?w&&!N&&null===n||w&&!1===n?w:w&&N||w&&n||w&&N&&!1===n?(0,o.jsx)("span",{className:"text-red-600 font-bold",children:w}):null:(0,o.jsx)("span",{className:"bg-red-600 font-black text-white p-1 rounded-sm",children:"Sin stock"})}),(0,o.jsx)("td",{className:"p-2 dark:text-gray-50 text-center text-lg hover:cursor-pointer ",children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsxs)("p",{className:"mb-4 pb-2 pt-2 px-2 hover:rounded-md hover:cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-800 text-3xl font-black ",onClick:function(){navigator.clipboard.writeText("".concat(E)),I.fire({icon:"success",title:"Copiado",color:"".concat(S?"white":"#545454"),background:"".concat(S?"#505050":"white")})},children:["$",v]}),(0,o.jsxs)("p",{className:"pb-2 pt-2 hover:rounded-md hover:cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-800 text-2xl font-medium",onClick:function(){navigator.clipboard.writeText("".concat(C)),I.fire({icon:"success",title:"Copiado",color:"".concat(S?"white":"#545454"),background:"".concat(S?"#505050":"white")})},children:["$",g]}),(0,o.jsxs)("p",{className:"mt-4 pb-2 pt-2 hover:rounded-md hover:cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-800 text-xl",onClick:function(){navigator.clipboard.writeText("".concat(y)),I.fire({icon:"success",title:"Copiado",color:"".concat(S?"white":"#545454"),background:"".concat(S?"#505050":"white")})},children:["$",b]})]})}),(0,o.jsxs)("td",{className:"p-3 w-40 mt-2 ",children:[(0,o.jsx)(l(),{passHref:!0,href:"",children:(0,o.jsx)("button",{type:"button",className:"bg-gradient-to-r from-green-400 to-blue-500 hover:from-pink-500 hover:to-yellow-500 mb-2 w-full text-black p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:A,children:"Vender"})}),(0,o.jsx)(l(),{passHref:!0,href:"/producto/".concat(k),children:(0,o.jsx)("button",{type:"button",className:"bg-blue-600 hover:bg-blue-900 mb-2 w-full text-white p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:function(){return P(t)},children:"Detalles"})}),(0,o.jsx)(l(),{passHref:!0,href:"/producto/editar/".concat(k),children:(0,o.jsx)("button",{type:"button",className:"bg-green-600 hover:bg-green-900 mb-2 w-full text-white p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:function(){return P(t)},children:"Editar"})}),(0,o.jsx)(l(),{passHref:!0,href:"",children:(0,o.jsx)("button",{type:"button",className:"bg-red-600 hover:bg-red-900 w-full text-white p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:function(){I.fire({icon:"success",title:"Agregado a faltante",color:"".concat(S?"white":"#545454"),background:"".concat(S?"#505050":"white")}),a(!n),null===n&&N&&a(!1)},children:!N&&null===n||!N&&!1===n||N&&!1===n?"Agregar faltante":"Quitar faltante"})})]})]})},b=function(){var e=(0,c.useContext)(d.Z),t=e.traerProductos,r=e.productos,n=e.eliminarProductos,a=e.eliminarProveedores,s=e.eliminarRubros,i=e.limpiarSeleccionado,l=e.filtro,u=e.filtrados,h=e.traerDolarAPI,f=e.traerDolarBD,x=e.dolarBD,p=e.editarProductos,b=e.orderCodigo,g=e.orderCodigoFiltrados,v=e.orderPrecio,w=e.orderPrecioFiltrados,j=e.orderNombre,k=e.orderNombreFiltrados,N=e.orderMarca,y=e.orderMarcaFiltrados,C=e.orderModelo,E=e.orderModeloFiltrados,S=e.orderDisponibles,_=e.orderDisponiblesFiltrados,P=(0,c.useState)(""),O=P[0],F=P[1],M=(0,c.useState)(!1),D=M[0],I=M[1],A=(0,c.useState)(!1),Z=A[0],B=A[1],T=(0,c.useState)(!1),$=T[0],R=T[1],H=(0,c.useState)(!1),L=H[0],q=H[1],J=(0,c.useState)(!1),Q=J[0],U=J[1],X=(0,c.useState)(!1),G=X[0],V=X[1],z=(0,c.useState)(!1),K=z[0],W=z[1];(0,c.useEffect)((function(){t()}),[]),(0,c.useEffect)((function(){i(),f(),h()}),[]),(0,c.useEffect)((function(){p(x)}),[x]),(0,c.useEffect)((function(){O&&g(Z),b(Z)}),[Z]),(0,c.useEffect)((function(){O&&w(K),v(K)}),[K]),(0,c.useEffect)((function(){O&&k($),j($)}),[$]),(0,c.useEffect)((function(){O&&y(L),N(L)}),[L]),(0,c.useEffect)((function(){O&&E(Q),C(Q)}),[Q]),(0,c.useEffect)((function(){O&&_(G),S(G)}),[G]),(0,c.useEffect)((function(){I(!!O)}),[O]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:" absolute lg:relative",children:[(0,o.jsx)("h1",{className:"font-black dark:text-blue-300 text-4xl text-blue-900 text-center mb-4 ",children:"Listado de productos"}),(0,o.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between w-4/4",children:[(0,o.jsx)("input",{type:"text",className:"lg:w-2/6 p-4 shadow dark:bg-gray-900 focus:outline-none focus:ring focus:border-blue-300 dark:text-gray-50 rounded-lg",placeholder:"Buscar alg\xfan producto",onChange:function(e){F(e.target.value),l(e.target.value)}}),(0,o.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,o.jsx)("input",{type:"button",value:"Eliminar Productos",className:"bg-red-600 p-2 mt-2 text-white font-bold rounded-lg hover:cursor-pointer ",onClick:function(){return n()}}),(0,o.jsx)("input",{type:"button",value:"Eliminar Rubros",className:"bg-red-600 p-2 mt-2 text-white font-bold rounded-lg hover:cursor-pointer ",onClick:function(){return s()}}),(0,o.jsx)("input",{type:"button",value:"Eliminar Proveedores",className:"bg-red-600 p-2 mt-2 text-white font-bold rounded-lg hover:cursor-pointer ",onClick:function(){return a()}})]}),x&&(0,o.jsxs)("p",{className:" p-4 pl-0 my-auto font-bold dark:text-white",children:["Dolar hoy: ",(0,o.jsxs)("span",{className:"text-red-600",children:["$",x]})]})]})]}),(0,o.jsxs)("table",{className:"relative top-44 sm:top-44 lg:top-0 w-full mt-5 table-auto shadow rounded-lg dark:bg-gray-900 bg-white ",children:[(0,o.jsx)("thead",{className:"bg-blue-800 text-white",children:(0,o.jsxs)("tr",{className:"hover:cursor-pointer select-none",children:[(0,o.jsx)("th",{onClick:function(){B(!Z)},className:"p-2 rounded-tl-lg",children:"CODIGO"}),(0,o.jsx)("th",{onClick:function(){R(!$)},children:"NOMBRE"}),(0,o.jsx)("th",{onClick:function(){q(!L)},children:"MARCA"}),(0,o.jsx)("th",{onClick:function(){U(!Q)},children:"MODELO"}),(0,o.jsx)("th",{onClick:function(){V(!G)},children:"DISPONIBLES"}),(0,o.jsx)("th",{onClick:function(){W(!K)},children:"PRECIO"}),(0,o.jsx)("th",{className:"rounded-tr-lg",children:"ACCIONES"})]})}),(0,o.jsx)("tbody",{children:0===Object.keys(u).length&&D?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("tr",{className:"relative p-3 dark:text-gray-50 text-xl",children:(0,o.jsx)("td",{children:"Sin resultados"})})}):Object.keys(u).length>0&&D?(0,o.jsx)(o.Fragment,{children:u.map((function(e){return(0,o.jsx)(m,{producto:e},e._id)}))}):(0,o.jsx)(o.Fragment,{children:r.map((function(e){return(0,o.jsx)(m,{producto:e},e._id)}))})})]})]})},g=function(){var e=(0,c.useContext)(h.Z),t=e.usuarioAutenticado,r=e.usuario;return(0,c.useEffect)((function(){t()}),[]),(0,o.jsx)(n.Z,{pagina:"Todos los productos",children:r&&(0,o.jsx)(b,{})})}}},function(e){e.O(0,[511,774,888,179],(function(){return t=703,e(e.s=t);var t}));var t=e.O();_N_E=t}]);