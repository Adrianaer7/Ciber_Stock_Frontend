(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[334],{4426:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/faltantes",function(){return r(6155)}])},7207:function(e,t,r){"use strict";var n=r(5893),o=r(7294),s=r(9008),a=r(1664),c=r.n(a),l=r(5675),i=r.n(l),d=r(1163),u=r(1146),x=r(7581);t.Z=function(e){var t=e.children,r=e.pagina,a=(0,o.useContext)(u.Z),l=a.usuario,h=a.cerrarSesion,f=a.token,p=a.traerTema,m=(0,o.useContext)(x.Z),g=m.limpiarSeleccionado,b=m.limpiarApp,j=(0,o.useState)(!1),v=j[0],k=j[1],N=(0,d.useRouter)(),w=N.route;(0,o.useEffect)((function(){f||N.push("/")}),[f]),(0,o.useEffect)((function(){var e,t=null!==(e=JSON.parse(localStorage.getItem("Modo oscuro")))&&void 0!==e&&e;k(t)}),[]),(0,o.useEffect)((function(){localStorage.setItem("Modo oscuro",JSON.stringify(v)),p(v)}),[v]);return(0,n.jsxs)("div",{className:"min-h-screen",children:[(0,n.jsx)(s.default,{children:(0,n.jsxs)("title",{children:["Inventario - ",r]})}),(0,n.jsxs)("div",{className:"lg:flex md:min-h-screen sm:min-h-screen bg-gray-100 ".concat(v&&"dark"),children:[(0,n.jsxs)("div",{className:"lg:w-1/5 bg-blue-900 px-5 dark:bg-gray-900 flex flex-col justify-between",children:[(0,n.jsxs)("p",{className:"text-white text-4xl font-black text-center",children:["Hola, ",l?(0,n.jsx)("span",{children:l.nombre}):null]}),(0,n.jsxs)("nav",{className:"mt-10 lg:flex-col lg:h-5/6",children:[(0,n.jsx)(c(),{href:"/productos",children:(0,n.jsx)("a",{className:"".concat("/productos"===w?"bg-blue-300 bg-opacity-10 rounded-md  text-white":"text-white"," text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Productos"})}),(0,n.jsx)(c(),{href:"/nuevoproducto",children:(0,n.jsx)("a",{onClick:function(){return g()},className:"".concat("/nuevoproducto"===w?"bg-blue-300 bg-opacity-10 rounded-md  text-white":"text-white"," text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Nuevo Producto"})}),(0,n.jsx)(c(),{href:"/faltantes",children:(0,n.jsx)("a",{onClick:function(){return g()},className:"".concat("/faltantes"===w?"bg-blue-300 bg-opacity-10 rounded-md  text-white":"text-white"," text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Faltantes"})})]}),(0,n.jsxs)("div",{className:"flex flex-row justify-between mb-2",children:[(0,n.jsx)(i(),{src:v?"/light_mode.svg":"/dark_mode.svg",alt:v?"light":"dark",width:50,height:50,priority:!0,className:"cursor-pointer",onClick:function(){k(!v)}}),(0,n.jsx)(i(),{src:v?"/logout_light.svg":"/logout_dark.svg",alt:"Cerrar Sesion",width:50,height:50,priority:!0,className:"cursor-pointer",onClick:function(){return h(),void b()}})]})]}),(0,n.jsx)("div",{className:" lg:w-4/5 p-2 lg:p-10 h-screen dark:bg-gray-800 overflow-x-auto ",children:t})]})]})}},6155:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(5893),o=r(7294),s=r(4051),a=r.n(s),c=r(1664),l=r.n(c),i=r(7581),d=r(349),u=r(1146),x=r(6455),h=r.n(x);function f(e,t,r,n,o,s,a){try{var c=e[s](a),l=c.value}catch(i){return void r(i)}c.done?t(l):Promise.resolve(l).then(n,o)}var p=function(e){var t=e.producto,r=t.nombre,s=t.marca,c=t.codigo,x=t.disponibles,p=t.modelo,m=t.rubro,g=t._id,b=t.faltante,j=t.proveedor,v=(0,o.useContext)(u.Z).modo,k=(0,o.useContext)(i.Z).productoActual,N=(0,o.useContext)(d.Z).eliminarFaltante,w=h().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}),y=function(){var e,t=(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(g);case 2:w.fire({icon:"error",title:"Quitado de faltantes",color:"".concat(v?"white":"#545454"),background:"".concat(v?"#505050":"white")});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){f(s,n,o,a,c,"next",e)}function c(e){f(s,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,n.jsxs)("tr",{className:"border-b dark:border-none hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,n.jsx)("td",{className:"p-3 dark:text-gray-50 text-center font-semibold",children:c}),(0,n.jsx)("td",{className:"dark:text-gray-50 p-3",children:r}),(0,n.jsx)("td",{className:"p-3 dark:text-gray-50 text-center",children:s}),(0,n.jsx)("td",{className:"p-3 dark:text-gray-50 text-center",children:p}),(0,n.jsx)("td",{className:"p-3 dark:text-gray-50 text-center",children:m}),(0,n.jsx)("td",{className:"p-3 dark:text-gray-50 text-center",children:j}),(0,n.jsx)("td",{className:"p-3 dark:text-gray-50 text-center uppercase",children:x&&b?(0,n.jsx)("span",{className:"font-bold text-red-600 p-1",children:x}):x&&!b?x:(0,n.jsx)("span",{className:"font-black text-white bg-red-600 p-1 uppercase",children:"Sin stock"})}),(0,n.jsxs)("td",{className:"p-3 w-40 mt-2 ",children:[(0,n.jsx)(l(),{passHref:!0,href:"/producto/".concat(g),children:(0,n.jsx)("button",{type:"button",className:"bg-blue-600 hover:bg-blue-900 mb-2 w-full text-white p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:function(){return k(t)},children:"Detalles"})}),(0,n.jsx)(l(),{passHref:!0,href:"",children:(0,n.jsx)("button",{type:"button",className:"bg-red-600 hover:bg-red-900 mb-2 w-full text-white p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:y,children:"Quitar de faltantes"})})]})]})},m=function(){var e=(0,o.useContext)(d.Z),t=e.faltantes,r=e.traerFaltantes,s=e.filtroFaltante,a=e.filtrados,c=e.orderCodigo,l=e.orderCodigoFiltrados,i=e.orderNombre,x=e.orderNombreFiltrados,h=e.orderMarca,f=e.orderMarcaFiltrados,m=e.orderModelo,g=e.orderModeloFiltrados,b=e.orderRubro,j=e.orderRubroFiltrados,v=e.orderProveedor,k=e.orderProveedorFiltrados,N=e.orderDisponibles,w=e.orderDisponiblesFiltrados,y=(0,o.useState)(""),C=y[0],E=y[1],S=(0,o.useState)(!1),_=S[0],F=S[1],O=(0,o.useState)(!1),P=O[0],M=O[1],R=(0,o.useState)(!1),Z=R[0],D=R[1],I=(0,o.useState)(!1),A=I[0],B=I[1],H=(0,o.useState)(!1),L=H[0],T=H[1],J=(0,o.useState)(!1),Q=J[0],X=J[1],G=(0,o.useState)(!1),U=G[0],V=G[1],q=(0,o.useState)(!1),z=q[0],K=q[1],W=(0,o.useContext)(u.Z).usuarioAutenticado;(0,o.useEffect)((function(){W()}),[]),(0,o.useEffect)((function(){r()}),[]),(0,o.useEffect)((function(){C&&l(P),c(P)}),[P]),(0,o.useEffect)((function(){C&&x(Z),i(Z)}),[Z]),(0,o.useEffect)((function(){C&&f(A),h(A)}),[A]),(0,o.useEffect)((function(){C&&g(L),m(L)}),[L]),(0,o.useEffect)((function(){C&&j(Q),b(Q)}),[Q]),(0,o.useEffect)((function(){C&&k(U),v(U)}),[U]),(0,o.useEffect)((function(){C&&w(z),N(z)}),[z]),(0,o.useEffect)((function(){F(!!C)}),[C]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:" absolute lg:relative",children:[(0,n.jsx)("h1",{className:"text-red-700 font-black text-4xl dark:text-red-500 text-center",children:"Faltantes"}),(0,n.jsx)("p",{className:"mt-3 text-center text-black dark:text-gray-50",children:"Lista de todos los productos con poco stock"}),(0,n.jsx)("div",{className:"flex flex-col lg:flex-row justify-between w-4/4",children:(0,n.jsx)("input",{type:"text",className:"lg:w-2/6 p-4 shadow dark:bg-gray-900 focus:outline-none focus:ring focus:border-blue-300 dark:text-gray-50 rounded-lg",placeholder:"Buscar alg\xfan producto faltante",onChange:function(e){E(e.target.value),s(e.target.value)}})})]}),(0,n.jsxs)("table",{className:"relative top-44 sm:top-44 lg:top-0 w-full mt-5 table-auto shadow rounded-lg dark:bg-gray-900 bg-white ",children:[(0,n.jsx)("thead",{className:"bg-red-600 text-white",children:(0,n.jsxs)("tr",{className:"hover:cursor-pointer select-none",children:[(0,n.jsx)("th",{onClick:function(){M(!P)},className:"p-2 rounded-tl-lg",children:"CODIGO"}),(0,n.jsx)("th",{onClick:function(){D(!Z)},children:"NOMBRE"}),(0,n.jsx)("th",{onClick:function(){B(!A)},children:"MARCA"}),(0,n.jsx)("th",{onClick:function(){T(!L)},children:"MODELO"}),(0,n.jsx)("th",{onClick:function(){X(!Q)},children:"RUBRO"}),(0,n.jsx)("th",{onClick:function(){V(!U)},children:"PROVEEDOR"}),(0,n.jsx)("th",{onClick:function(){K(!z)},children:"DISPONIBLES"}),(0,n.jsx)("th",{className:"rounded-tr-lg",children:"ACCIONES"})]})}),(0,n.jsx)("tbody",{children:0===Object.keys(a).length&&_?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("tr",{className:"relative p-3 text-2xl dark:text-gray-50",children:(0,n.jsx)("td",{children:"No hay resultados"})})}):Object.keys(a).length>0&&_?(0,n.jsx)(n.Fragment,{children:a.map((function(e){return(0,n.jsx)(p,{producto:e},e._id)}))}):(0,n.jsx)(n.Fragment,{children:t.map((function(e){return(0,n.jsx)(p,{producto:e},e._id)}))})})]})]})},g=r(7207),b=function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g.Z,{pagina:"Faltantes",children:(0,n.jsx)(m,{})})})}}},function(e){e.O(0,[511,774,888,179],(function(){return t=4426,e(e.s=t);var t}));var t=e.O();_N_E=t}]);