(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{703:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/productos",function(){return r(420)}])},7207:function(e,t,r){"use strict";var n=r(5893),o=r(7294),c=r(9008),a=r(1664),s=r.n(a),l=r(5675),i=r.n(l),d=r(1163),u=r(1146),x=r(7581);t.Z=function(e){var t=e.children,r=e.pagina,a=(0,o.useContext)(u.Z),l=a.usuario,h=a.cerrarSesion,f=a.token,m=a.traerTema,g=(0,o.useContext)(x.Z),b=g.limpiarSeleccionado,p=g.limpiarApp,v=(0,o.useState)(!1),w=v[0],j=v[1],k=(0,o.useState)(!1),y=k[0],N=k[1],C=(0,d.useRouter)(),E=C.route;(0,o.useEffect)((function(){f||C.push("/")}),[f]),(0,o.useEffect)((function(){var e,t=null!==(e=JSON.parse(localStorage.getItem("Modo oscuro")))&&void 0!==e&&e;j(t)}),[]),(0,o.useEffect)((function(){localStorage.setItem("Modo oscuro",JSON.stringify(w)),m(w)}),[w]);return(0,n.jsxs)("div",{className:"min-h-screen",children:[(0,n.jsx)(c.default,{children:(0,n.jsxs)("title",{children:["Inventario - ",r]})}),(0,n.jsxs)("div",{className:"lg:flex md:min-h-screen sm:min-h-screen bg-gray-100 ".concat(w&&"dark"),children:[(0,n.jsxs)("div",{className:"lg:w-1/5 bg-blue-900 dark:bg-gray-900 flex flex-col justify-between lg:justify-start ",children:[(0,n.jsxs)("div",{className:"flex justify-between mt-1 px-5",children:[(0,n.jsxs)("p",{className:"text-white text-2xl md:text-4xl font-black text-center",children:["Hola, ",l?(0,n.jsx)("span",{children:l.nombre}):null]}),(0,n.jsx)(i(),{src:"/settings-claro.svg",alt:"Settings",width:30,height:30,priority:!0,className:"cursor-pointer",onClick:function(){N(!y)}})]}),y?(0,n.jsxs)("div",{className:"flex flex-col mt-2 ml-5 py-2",children:[(0,n.jsx)("button",{onClick:function(){j(!w)},className:"text-white text-left py-2 hover:text-blue-300 hover:translate-x-3",children:w?"Tema claro":"Tema oscuro"}),(0,n.jsx)("button",{onClick:function(){h(),p()},className:"text-white text-left py-2 hover:text-blue-300 hover:translate-x-3",children:"Cerrar sesi\xf3n"})]}):null,(0,n.jsxs)("nav",{className:"grid grid-cols-3 lg:px-5 mt-4 sm:mt-10 lg:flex lg:flex-col lg:justify-start h-5/6",children:[(0,n.jsx)(s(),{href:"/productos",children:(0,n.jsx)("a",{className:"".concat("/productos"===E?"lg:bg-blue-300 lg:border-none border-b-gray-300 border-b-2 lg:bg-opacity-10 lg:rounded-md  text-white":"text-white","  text-sm text-center lg:text-left sm:text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Productos"})}),(0,n.jsx)(s(),{href:"/nuevoproducto",children:(0,n.jsx)("a",{onClick:function(){return b()},className:"".concat("/nuevoproducto"===E?"lg:bg-blue-300 lg:border-none border-b-gray-300 border-b-2 lg:bg-opacity-10 lg:rounded-md  text-white":"text-white"," text-sm text-center lg:text-left sm:text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Nuevo Producto"})}),(0,n.jsx)(s(),{href:"/faltantes",children:(0,n.jsx)("a",{onClick:function(){return b()},className:"".concat("/faltantes"===E?"lg:bg-blue-300 lg:border-none border-b-gray-300 border-b-2 lg:bg-opacity-10 lg:rounded-md  text-white":"text-white"," text-sm text-center lg:text-left sm:text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Faltantes"})}),(0,n.jsx)(s(),{href:"/compras",children:(0,n.jsx)("a",{onClick:function(){return b()},className:"".concat("/compras"===E?"lg:bg-blue-300 lg:border-none border-b-gray-300 border-b-2 lg:bg-opacity-10 lg:rounded-md  text-white":"text-white"," text-sm text-center lg:text-left sm:text-2xl block p-2 mt-2 hover:text-blue-300"),children:"Compras"})})]})]}),(0,n.jsx)("div",{className:" lg:w-4/5 lg:p-10 h-screen dark:bg-gray-800 overflow-x-auto ",children:t})]})]})}},420:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(5893),o=r(7207),c=r(7294),a=r(4051),s=r.n(a),l=r(1664),i=r.n(l),d=r(7581),u=r(349),x=r(1146),h=r(6455),f=r.n(h);function m(e,t,r,n,o,c,a){try{var s=e[c](a),l=s.value}catch(i){return void r(i)}s.done?t(l):Promise.resolve(l).then(n,o)}var g=function(e){var t=e.producto,r=(0,c.useState)(null),o=r[0],a=r[1],l=t.nombre,h=t.marca,g=t.codigo,b=t.precio_venta_conocidos,p=t.precio_venta_efectivo,v=t.precio_venta_tarjeta,w=t.disponibles,j=t.modelo,k=t._id,y=t.faltante,N=t.limiteFaltante,C=(l+" "+h+" "+j+" $"+Math.round(b)).trim().replace(/\s\s+/g," "),E=(l+" "+h+" "+j+" $"+Math.round(p)).trim().replace(/\s\s+/g," "),S=(l+" "+h+" "+j+" $"+Math.round(v)).trim().replace(/\s\s+/g," "),_=(0,c.useContext)(x.Z).modo,F=(0,c.useContext)(d.Z),P=F.productoActual,O=F.venderProducto,D=(0,c.useContext)(u.Z),M=D.agregarFaltante,I=D.eliminarFaltante;(0,c.useEffect)((function(){o&&M(k),!1===o&&(I(k),A.fire({icon:"error",title:"Quitado de faltantes",background:"".concat(_?"#505050":"white"),color:"".concat(_?"white":"#545454")}))}),[o]);var A=f().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),Z=function(){var e,r=(e=s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().fire({title:"".concat(_?'<h5 style="color:white">Unidades</h5>':'<h5 style="color:#545454">Unidades</h5>'),background:"".concat(_?"rgb(31 41 55)":"white"),html:"".concat(_?'<input id="swal-input" type="tel" value="1" style="color: white; width: 100px; text-align:center" class="swal2-input">':'<input id="swal-input" type="tel" value="1" style="color: black; width: 100px; text-align:center;" class="swal2-input">'),width:"25rem",focusConfirm:!0,preConfirm:function(){return[document.getElementById("swal-input").value]},showCloseButton:!0});case 2:if(!(r=e.sent).isConfirmed){e.next=19;break}if(!((n=Number(r.value[0]))<1||!n||isNaN(n))&&Number.isInteger(n)){e.next=9;break}return e.next=8,f().fire({icon:"error",title:"Error",color:"".concat(_?"white":"rgb(31 41 55)"),background:"".concat(_?"rgb(31 41 55)":"white"),html:"".concat(_?'<p style="color:#a59ff3">Los <b>unidades a vender</b> deben ser un n\xfamero entero mayor a 0.</p>':'<p style="color: #545454">Los <b>unidades a vender</b> deben ser un n\xfamero entero mayor a 0.</p>')});case 8:return e.abrupt("return",Z());case 9:if(!(n>w)){e.next=13;break}return e.next=12,f().fire({icon:"error",title:"Error",color:"".concat(_?"white":"rgb(31 41 55)"),background:"".concat(_?"rgb(31 41 55)":"white"),html:"".concat(_?'<p style="color:#a59ff3"><b>No se pueden vender</b> m\xe1s unidades de las que hay.</p>':'<p style="color: #545454">No se pueden vender</b> m\xe1s unidades de las que hay..</p>')});case 12:return e.abrupt("return",Z());case 13:return e.next=15,O(t,n);case 15:return e.next=17,A.fire({icon:"success",title:"".concat(n>1?"Se vendieron "+n+" unidades de"+l:"Se vendi\xf3 "+n+" unidad de "+l),background:"".concat(_?"#505050":"white"),width:"25%",color:"".concat(_?"white":"#545454")});case 17:1==w-N&&A.fire({icon:"success",title:"Agregado a faltante",color:"".concat(_?"white":"#545454"),background:"".concat(_?"#505050":"white")});case 19:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var c=e.apply(t,r);function a(e){m(c,n,o,a,s,"next",e)}function s(e){m(c,n,o,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,n.jsxs)("tr",{className:"border-b dark:border-b-gray-800 dark:last:border-none hover:bg-gray-50 hover:cursor-pointer active:bg-gray-100 dark:active:bg-gray-800 dark:hover:bg-gray-700",children:[(0,n.jsx)("td",{className:"p-3 dark:text-gray-50 text-center font-semibold",children:g}),(0,n.jsx)("td",{className:"dark:text-gray-50 p-3",children:l}),(0,n.jsx)("td",{className:"p-3 dark:text-gray-50 text-center",children:h}),(0,n.jsx)("td",{className:"p-3 dark:text-gray-50 text-center",children:j}),(0,n.jsx)("td",{className:"dark:text-gray-50 text-center uppercase",children:w?w&&!y&&null===o||w&&!1===o?w:w&&y||w&&o||w&&y&&!1===o?(0,n.jsx)("span",{className:"text-red-600 font-bold",children:w}):null:(0,n.jsx)("span",{className:"bg-red-600 font-black text-white p-1 rounded-sm",children:"Sin stock"})}),(0,n.jsx)("td",{className:"p-2 dark:text-gray-50 text-center text-lg hover:cursor-pointer ",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("p",{className:"mb-4 pb-2 pt-2 px-2 hover:rounded-md hover:cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-800 text-3xl font-black ",onClick:function(){navigator.clipboard.writeText("".concat(S)),A.fire({icon:"success",title:"Copiado",color:"".concat(_?"white":"#545454"),background:"".concat(_?"#505050":"white")})},children:["$",v]}),(0,n.jsxs)("p",{className:"pb-2 pt-2 hover:rounded-md hover:cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-800 text-2xl font-medium",onClick:function(){navigator.clipboard.writeText("".concat(E)),A.fire({icon:"success",title:"Copiado",color:"".concat(_?"white":"#545454"),background:"".concat(_?"#505050":"white")})},children:["$",p]}),(0,n.jsxs)("p",{className:"mt-4 pb-2 pt-2 hover:rounded-md hover:cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-800 text-xl",onClick:function(){navigator.clipboard.writeText("".concat(C)),A.fire({icon:"success",title:"Copiado",color:"".concat(_?"white":"#545454"),background:"".concat(_?"#505050":"white")})},children:["$",b]})]})}),(0,n.jsxs)("td",{className:"p-3 w-40 mt-2 ",children:[(0,n.jsx)(i(),{passHref:!0,href:"",children:(0,n.jsx)("button",{type:"button",className:"bg-gradient-to-r from-green-400 to-blue-500 hover:from-pink-500 hover:to-yellow-500 mb-2 w-full text-black p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:Z,children:"Vender"})}),(0,n.jsx)(i(),{passHref:!0,href:"/producto/".concat(k),children:(0,n.jsx)("button",{type:"button",className:"bg-blue-600 hover:bg-blue-900 mb-2 w-full text-white p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:function(){return P(t)},children:"Detalles"})}),(0,n.jsx)(i(),{passHref:!0,href:"/producto/editar/".concat(k),children:(0,n.jsx)("button",{type:"button",className:"bg-green-600 hover:bg-green-900 mb-2 w-full text-white p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:function(){return P(t)},children:"Editar"})}),(0,n.jsx)(i(),{passHref:!0,href:"",children:(0,n.jsx)("button",{type:"button",className:"bg-red-600 hover:bg-red-900 w-full text-white p-2 uppercase font-bold text-xs mr-3 rounded-md",onClick:function(){A.fire({icon:"success",title:"Agregado a faltante",color:"".concat(_?"white":"#545454"),background:"".concat(_?"#505050":"white")}),a(!o),null===o&&y&&a(!1)},children:!y&&null===o||!y&&!1===o||y&&!1===o?"Agregar faltante":"Quitar faltante"})})]})]})},b=r(5675),p=r.n(b),v=function(){var e=(0,c.useContext)(x.Z).modo,t=(0,c.useContext)(d.Z),r=t.traerProductos,o=t.productos,a=(t.eliminarProductos,t.eliminarProveedores,t.eliminarRubros,t.limpiarSeleccionado),s=t.filtro,l=t.filtrados,i=t.traerDolarAPI,u=t.traerDolarBD,h=t.dolarBD,f=t.editarProductos,m=t.orderCodigo,b=t.orderCodigoFiltrados,v=t.orderPrecio,w=t.orderPrecioFiltrados,j=t.orderNombre,k=t.orderNombreFiltrados,y=t.orderMarca,N=t.orderMarcaFiltrados,C=t.orderModelo,E=t.orderModeloFiltrados,S=t.orderDisponibles,_=t.orderDisponiblesFiltrados,F=(0,c.useState)(""),P=F[0],O=F[1],D=(0,c.useState)(!1),M=D[0],I=D[1],A=(0,c.useState)(!1),Z=A[0],B=A[1],T=(0,c.useState)(!1),$=T[0],L=T[1],H=(0,c.useState)(!1),R=H[0],q=H[1],J=(0,c.useState)(!1),Q=J[0],U=J[1],X=(0,c.useState)(!1),z=X[0],G=X[1],V=(0,c.useState)(!1),K=V[0],W=V[1],Y=(0,c.useState)(!1),ee=Y[0],te=Y[1];(0,c.useEffect)((function(){r()}),[]),(0,c.useEffect)((function(){a(),u(),i()}),[]),(0,c.useEffect)((function(){f(h)}),[h]),(0,c.useEffect)((function(){P&&b($),m($)}),[$]),(0,c.useEffect)((function(){P&&w(ee),v(ee)}),[ee]),(0,c.useEffect)((function(){P&&k(R),j(R)}),[R]),(0,c.useEffect)((function(){P&&N(Q),y(Q)}),[Q]),(0,c.useEffect)((function(){P&&E(z),C(z)}),[z]),(0,c.useEffect)((function(){P&&_(K),S(K)}),[K]),(0,c.useEffect)((function(){I(!!P)}),[P]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"min-w-full top-0 m-0",children:[(0,n.jsx)("h1",{className:"font-black dark:text-blue-300 text-3xl sm:text-4xl text-blue-900 text-center mt-2 sm:mt-0 mb-4 ",children:"Listado de productos"}),(0,n.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row justify-between mx-1 md:mx-0",children:[(0,n.jsxs)("div",{className:"".concat(Z&&"ring-2"," relative my-auto p-2 w-full sm:w-2/6 xl:w-2/6 shadow dark:bg-gray-900 focus:outline-none focus:ring focus:border-blue-300 dark:text-gray-50 bg-white rounded-md md:rounded-lg"),children:[(0,n.jsx)("input",{type:"text",className:"w-10/12 xl:w-11/12 p-2 focus:outline-none dark:bg-transparent",placeholder:"Buscar alg\xfan producto",onChange:function(e){O(e.target.value),s(e.target.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,""))},value:P,onFocus:function(){return B(!0)},onBlur:function(){return B(!1)}}),(0,n.jsx)("div",{className:"absolute mr-2 -inset-y-1 flex right-0 opacity-40",children:(0,n.jsx)(p(),{src:"".concat(e&&M?"/close_dark.svg":!e&&M?"/close_light.svg":e&&!M?"/search_light.svg":"/search_dark.svg"),alt:"Cerrar",width:30,height:30,priority:!0,className:"cursor-pointer",onClick:M?function(){return O("")}:null})})]}),h&&(0,n.jsxs)("p",{className:" p-4 pl-0 my-auto font-bold dark:text-white",children:["Dolar hoy: ",(0,n.jsxs)("span",{className:"text-red-600",children:["$",h]})]})]})]}),(0,n.jsxs)("table",{className:"top-44 sm:top-44 lg:top-0 w-full mt-5 table-auto shadow rounded-none md:rounded-lg dark:bg-gray-900 bg-white ",children:[(0,n.jsx)("thead",{className:"bg-blue-800 text-white",children:(0,n.jsxs)("tr",{className:"hover:cursor-pointer select-none",children:[(0,n.jsx)("th",{onClick:function(){L(!$)},className:"p-2 md:rounded-tl-lg",children:"CODIGO"}),(0,n.jsx)("th",{onClick:function(){q(!R)},children:"NOMBRE"}),(0,n.jsx)("th",{onClick:function(){U(!Q)},children:"MARCA"}),(0,n.jsx)("th",{onClick:function(){G(!z)},children:"MODELO"}),(0,n.jsx)("th",{onClick:function(){W(!K)},children:"DISPONIBLES"}),(0,n.jsx)("th",{onClick:function(){te(!ee)},children:"PRECIO"}),(0,n.jsx)("th",{className:"md:rounded-tr-lg",children:"ACCIONES"})]})}),(0,n.jsx)("tbody",{children:0===Object.keys(l).length&&M?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("tr",{className:"relative p-3 dark:text-gray-50 text-2xl",children:(0,n.jsx)("td",{children:"No hay resultados"})})}):Object.keys(l).length>0&&M?(0,n.jsx)(n.Fragment,{children:l.map((function(e){return(0,n.jsx)(g,{producto:e},e._id)}))}):(0,n.jsx)(n.Fragment,{children:o.map((function(e){return(0,n.jsx)(g,{producto:e},e._id)}))})})]})]})},w=function(){var e=(0,c.useContext)(x.Z),t=e.usuarioAutenticado,r=e.usuario;return(0,c.useEffect)((function(){t()}),[]),(0,n.jsx)(o.Z,{pagina:"Todos los productos",children:r&&(0,n.jsx)(v,{})})}}},function(e){e.O(0,[675,455,774,888,179],(function(){return t=703,e(e.s=t);var t}));var t=e.O();_N_E=t}]);